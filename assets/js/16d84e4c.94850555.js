"use strict";(globalThis.webpackChunksvgo_dev=globalThis.webpackChunksvgo_dev||[]).push([[3120],{998:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"migrations/migration-from-v2-to-v3","title":"Migration from v2 to v3","description":"This is a summary of the changes necessary to migrate from SVGO v2 to SVGO v3. If you want more details or have any questions, please refer to our release notes for SVGO v3.0.0.","source":"@site/.svgo/docs/06-migrations/02-migration-from-v2-to-v3.mdx","sourceDirName":"06-migrations","slug":"/migrations/migration-from-v2-to-v3","permalink":"/docs/migrations/migration-from-v2-to-v3","draft":false,"unlisted":false,"editUrl":"https://github.com/svg/svgo/tree/main/docs/06-migrations/02-migration-from-v2-to-v3.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Migration from v2 to v3"},"sidebar":"docsSidebar","previous":{"title":"Migration from v3 to v4","permalink":"/docs/migrations/migration-from-v3-to-v4"}}');var t=r(9801),o=r(8453);const s={title:"Migration from v2 to v3"},a=void 0,l={},d=[{value:"Version Requirements",id:"version-requirements",level:2},{value:"Default Behavior",id:"default-behavior",level:2},{value:"Plugins",id:"plugins",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Active Plugins",id:"active-plugins",level:3},{value:"Overriding Default Plugins",id:"overriding-default-plugins",level:3},{value:"JavaScript API",id:"javascript-api",level:2},{value:"Custom Plugins",id:"custom-plugins",level:2},{value:"TypeScript",id:"typescript",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,t.FD)(t.FK,{children:[(0,t.FD)(n.p,{children:["This is a summary of the changes necessary to migrate from SVGO v2 to SVGO v3. If you want more details or have any questions, please refer to our ",(0,t.Y)(n.a,{href:"https://github.com/svg/svgo/releases/tag/v3.0.0",children:"release notes for SVGO v3.0.0"}),"."]}),"\n",(0,t.Y)(n.h2,{id:"version-requirements",children:"Version Requirements"}),"\n",(0,t.FD)(n.p,{children:["SVGO now requires ",(0,t.Y)(n.a,{href:"https://nodejs.org/blog/release/v14.0.0",children:"Node.js >=14.0.0"}),"."]}),"\n",(0,t.Y)(n.h2,{id:"default-behavior",children:"Default Behavior"}),"\n",(0,t.FD)(n.p,{children:["The ",(0,t.Y)(n.strong,{children:(0,t.Y)(n.a,{href:"/docs/plugins/sortAttrs",children:"sortAttrs"})})," plugin is now enabled by default to improve gzip compression."]}),"\n",(0,t.FD)(n.p,{children:["To disable this behavior, configure it in the SVGO config. See the ",(0,t.Y)(n.a,{href:"https://github.com/svg/svgo?tab=readme-ov-file#configuration",children:"README"})," for more context."]}),"\n",(0,t.Y)(n.pre,{children:(0,t.Y)(n.code,{className:"language-diff",children:"  export default {\n    plugins: [\n-     'preset-default',\n+     {\n+       name: 'preset-default',\n+       params: {\n+         overrides: {\n+           sortAttrs: false,\n+         },\n+       },\n+     },\n    ],\n  };\n"})}),"\n",(0,t.Y)(n.h2,{id:"plugins",children:"Plugins"}),"\n",(0,t.FD)(n.p,{children:["The cleanupIDs plugin has been renamed to ",(0,t.Y)(n.strong,{children:(0,t.Y)(n.a,{href:"/docs/plugins/cleanupIds",children:"cleanupIds"})})," to bring more consistency between plugin names. If you were using cleanupIDs explicitly, amend your SVGO config to use cleanupIds instead:"]}),"\n",(0,t.Y)(n.pre,{children:(0,t.Y)(n.code,{className:"language-diff",children:"  export default {\n    plugins: [\n-     'cleanupIDs',\n+     'cleanupIds',\n    ],\n  };\n"})}),"\n",(0,t.FD)(n.p,{children:["The cleanupIds plugin no longer accepts the ",(0,t.Y)(n.code,{children:"prefix"})," parameter. Use the ",(0,t.Y)(n.strong,{children:(0,t.Y)(n.a,{href:"/docs/plugins/prefixIds",children:"prefixIds"})})," plugin instead. You must put prefixIds ",(0,t.Y)(n.strong,{children:(0,t.Y)(n.em,{children:"after"})})," cleanupIds. Doing so the other way around would just remove the prefixes again."]}),"\n",(0,t.Y)(n.pre,{children:(0,t.Y)(n.code,{className:"language-diff",children:"  export default {\n    plugins: [\n      {\n        name: 'cleanupIds',\n-       params: {\n-         prefix: 'my-prefix',\n-       },\n      },\n+     {\n+       name: 'prefixIds',\n+       params: {\n+         prefix: 'my-prefix',\n+       },\n+     },\n    ]\n  }\n"})}),"\n",(0,t.Y)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,t.Y)(n.h3,{id:"active-plugins",children:"Active Plugins"}),"\n",(0,t.FD)(n.p,{children:["Plugins defined in the ",(0,t.Y)(n.code,{children:"plugins"})," array no longer accept the property ",(0,t.Y)(n.code,{children:"active"}),". A plugin is enabled if it is named, and disabled if it is not named. Remove these entries from your config outright if you do not want them enabled."]}),"\n",(0,t.Y)(n.pre,{children:(0,t.Y)(n.code,{className:"language-diff",children:"  export default {\n    plugins: [\n      {\n        name: 'removeDoctype',\n-       active: true,\n      },\n-     {\n-       name: 'removeComments',\n-       active: false,\n-     },\n    ],\n  }\n"})}),"\n",(0,t.Y)(n.h3,{id:"overriding-default-plugins",children:"Overriding Default Plugins"}),"\n",(0,t.FD)(n.p,{children:["The ",(0,t.Y)(n.code,{children:"extendDefaultPlugins"})," helper utility has been removed. You can disable plugins that are enabled by default in ",(0,t.Y)(n.code,{children:"preset-default"})," through the ",(0,t.Y)(n.code,{children:"override"})," parameter instead."]}),"\n",(0,t.Y)(n.pre,{children:(0,t.Y)(n.code,{className:"language-diff",children:"- import { extendDefaultPlugins } from 'svgo';\n\n  export default {\n-   plugins: extendDefaultPlugins([\n-     {\n-       name: 'collapseGroups',\n-       active: false,\n-     },\n-   ]),\n+   plugins: [\n+     {\n+       name: 'preset-default',\n+       params: {\n+         overrides: {\n+           collapseGroups: false,\n+         },\n+       },\n+     },\n+   ],\n  }\n"})}),"\n",(0,t.Y)(n.h2,{id:"javascript-api",children:"JavaScript API"}),"\n",(0,t.FD)(n.p,{children:["We've removed the ",(0,t.Y)(n.code,{children:"info"})," property from the optimization result. This means we no longer return a width and height of the SVG. We've also removed ",(0,t.Y)(n.code,{children:"error"})," and ",(0,t.Y)(n.code,{children:"modernError"})," from the optimization result. All exceptions are thrown to the caller."]}),"\n",(0,t.Y)(n.pre,{children:(0,t.Y)(n.code,{className:"language-diff",children:"- const {data, error, modernError } = optimize(svg)\n+ try {\n+   const { data } = optimize(svg)\n+ } catch (error) {\n+   if (error.name === 'SvgoParserError') {\n+     error.toString(); // formatted error\n+   } else {\n+     // other runtime error\n+   }\n+ }\n"})}),"\n",(0,t.Y)(n.h2,{id:"custom-plugins",children:"Custom Plugins"}),"\n",(0,t.FD)(n.p,{children:["We previously supported different types of plugins: ",(0,t.Y)(n.code,{children:"full"}),", ",(0,t.Y)(n.code,{children:"perItem"}),", ",(0,t.Y)(n.code,{children:"perItemReverse"}),", and ",(0,t.Y)(n.code,{children:"visitor"}),"."]}),"\n",(0,t.FD)(n.p,{children:["We now only support the ",(0,t.Y)(n.code,{children:"visitor"})," plugin API. Any other type would need to be migrated to it. See the ",(0,t.Y)(n.a,{href:"/docs/plugins-api",children:"Plugin Architecture documentation"})," for more information."]}),"\n",(0,t.Y)(n.h2,{id:"typescript",children:"TypeScript"}),"\n",(0,t.FD)(n.p,{children:["SVGO now bundles TypeScript declarations in the npm package. There is no need to install ",(0,t.Y)(n.code,{children:"@types/svgo"})," separately. This does not affect users that never depended on ",(0,t.Y)(n.code,{children:"@types/svgo"})," directly or indirectly. You can check your lockfile to be sure."]}),"\n",(0,t.FD)(n.p,{children:["If you depended on ",(0,t.Y)(n.code,{children:"@types/svgo"})," before, uninstall it:"]}),"\n",(0,t.Y)(n.pre,{children:(0,t.Y)(n.code,{className:"language-sh",children:"# npm\nnpm uninstall @types/svgo\n\n# Yarn\nyarn remove @types/svgo\n"})})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.Y)(n,{...e,children:(0,t.Y)(c,{...e})}):c(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var i=r(1098);const t={},o=i.default.createContext(t);function s(e){const n=i.default.useContext(o);return i.default.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),i.default.createElement(o.Provider,{value:n},e.children)}}}]);